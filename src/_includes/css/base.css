/* ============================================================
   Base / Reset â€” Plurality
   ============================================================ */

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
  scroll-padding-top: 90px;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: var(--sans);
  font-weight: 400;
  line-height: 1.7;
  color: var(--text);
  background-color: var(--paper);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}

/* ---- Skip Link ---- */
.skip-link {
  position: absolute;
  top: -100%;
  left: 16px;
  z-index: 9999;
  padding: 8px 16px;
  background: var(--ink);
  color: #fff;
  font-family: var(--sans);
  font-size: 0.85rem;
  border-radius: 0 0 var(--radius) var(--radius);
  text-decoration: none;
  transition: top 0.2s;
}

.skip-link:focus {
  top: 0;
}

/* ---- Typography ---- */
h1, h2, h3, h4 {
  font-family: var(--serif);
  color: var(--heading);
  font-weight: 400;
  line-height: 1.25;
}

h1 { font-size: clamp(2.5rem, 5vw, 4rem); }
h2 { font-size: clamp(2rem, 3.5vw, 2.8rem); letter-spacing: -0.01em; }
h3 { font-size: 1.35rem; font-weight: 600; }
h4 { font-size: 1.05rem; font-weight: 600; }

p { margin-bottom: 1.2em; }

a {
  color: var(--teal);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 3px;
  text-decoration-color: color-mix(in srgb, var(--teal) 35%, transparent);
  transition: color 0.2s;
}

a:hover {
  color: var(--gold);
}

/* ---- Focus ---- */
:focus-visible {
  outline: 2px solid var(--teal);
  outline-offset: 3px;
}

/* ---- Selection ---- */
::selection {
  background: color-mix(in srgb, var(--teal) 20%, transparent);
}

/* ---- Lists ---- */
ul, ol { padding-left: 1.5em; }
li { margin-bottom: 0.4em; line-height: 1.7; }

/* ---- Images ---- */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ---- HR ---- */
hr {
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-light), transparent);
  margin: 3em 0;
}

/* ---- Blockquote ---- */
blockquote {
  border-left: 2px solid var(--gold);
  padding-left: 24px;
  margin: 2em 0;
  font-family: var(--serif);
  font-style: italic;
  font-size: 1.15rem;
  line-height: 1.7;
  color: var(--muted);
}

blockquote cite {
  display: block;
  margin-top: 0.8em;
  font-family: var(--sans);
  font-style: normal;
  font-size: 0.8rem;
  letter-spacing: 0.05em;
}

/* ---- CJK overrides ---- */
html[lang="zh"] {
  --serif: 'Noto Serif TC', 'Songti TC', 'PMingLiU', Georgia, serif;
  --sans: 'Noto Sans TC', 'PingFang TC', 'Microsoft JhengHei', system-ui, sans-serif;
}

html[lang="zh"] em,
html[lang="zh"] blockquote {
  font-style: normal;
  font-family: 'Kaiti TC', 'DFKai-SB', 'BiauKai', 'STKaiti', cursive;
}

html[lang="ja"] {
  --serif: 'Noto Serif JP', 'Yu Mincho', 'Hiragino Mincho ProN', Georgia, serif;
  --sans: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Meiryo', system-ui, sans-serif;
}

html[lang="th"] {
  --serif: 'Sarabun', 'Noto Serif Thai', Georgia, serif;
  --sans: 'Sarabun', 'Noto Sans Thai', system-ui, sans-serif;
}

html[lang="el"] {
  --serif: 'Cormorant Garamond', 'GFS Didot', Georgia, serif;
}

/* ---- Section label pattern ---- */
.section-label {
  font-family: var(--sans);
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--gold);
  margin-bottom: 1rem;
}

/* ---- Content wrapper ---- */
.content-wrap {
  max-width: var(--content-max);
  margin: 0 auto;
  padding: 0 var(--section-pad-h);
}

/* ---- Section ---- */
.section {
  padding: var(--section-pad-v) 0;
}

.section--warm {
  background: var(--warm);
}

/* ---- Gold separator ---- */
.gold-sep {
  width: 100%;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-light), transparent);
}

/* ---- Scroll reveal (progressive enhancement: visible by default, JS hides then reveals) ---- */
.reveal {
  opacity: 1;
  transform: none;
}

html.js-enhanced .reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

html.js-enhanced .reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}

/* ---- Reduced motion ---- */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  .reveal,
  html.js-enhanced .reveal {
    opacity: 1;
    transform: none;
  }
  html { scroll-behavior: auto; }
}

/* ---- Responsive ---- */
@media (max-width: 1024px) {
  :root {
    --section-pad-v: 80px;
  }
}

@media (max-width: 768px) {
  :root {
    --section-pad-v: 60px;
  }
}

/* ---- Print ---- */
@media print {
  .nav, .nav__overlay, .footer, .hero__scroll, .hero__glyph,
  .theme-toggle, .skip-link, .reader__toc, .reader__nav {
    display: none !important;
  }
  body {
    background: #fff;
    color: #000;
    font-size: 11pt;
  }
  .hero {
    min-height: auto;
    background: #fff;
    color: #000;
    padding: 2em;
  }
  .hero__title, .hero__subtitle, .hero__label, .hero__authors {
    color: #000;
  }
  .endorsement-card, .lang-card, .chapter-card, .chapter-group {
    break-inside: avoid;
  }
  .reader__content {
    max-width: 100%;
  }
  a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
  }
  a[href^="/"]::after {
    content: none;
  }
}
