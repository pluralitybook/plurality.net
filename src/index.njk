---
pagination:
  data: homeLangs
  size: 1
  alias: pageLang
layout: home.njk
eleventyComputed:
  lang: "{{ pageLang }}"
  title: ""
permalink: "{% if pageLang == 'en' %}/{% else %}/{{ pageLang }}/{% endif %}"
---

{% set t = i18n[pageLang] %}
{% set readPrefix = "" %}
{% if translations[pageLang] %}
  {% set readPrefix = translations[pageLang].prefix %}
{% endif %}

{# ═══════ HERO ═══════ #}
<section class="hero" aria-labelledby="hero-title">
  <img src="/assets/images/logo-plurality.png" alt="Plurality logo" class="hero__logo" width="319" height="97">

  {# ═══════ LANG PICKER ═══════ #}
  {% if homeLangs | length > 1 %}
  <nav class="home-lang-bar" aria-label="Language">
    {% for hl in homeLangs %}
      {% if hl == pageLang %}
        <span class="home-lang-bar__current">{{ i18n[hl].lang_name }}</span>
      {% else %}
        <a href="{% if hl == 'en' %}/{% else %}/{{ hl }}/{% endif %}" class="home-lang-bar__link">{{ i18n[hl].lang_name }}</a>
      {% endif %}
    {% endfor %}
  </nav>
  {% endif %}

  <h1 id="hero-title" class="hero__title">
    <span class="c-r">P</span><span class="c-o">l</span><span class="c-g">u</span><span class="c-c">r</span><span class="c-w">a</span><span class="c-c">l</span><span class="c-g">i</span><span class="c-o">t</span><span class="c-r">y</span>
  </h1>

  <div class="hero__brand-line" aria-hidden="true">
    <span class="hero__brand-line-r"></span>
    <span class="hero__brand-line-o"></span>
    <span class="hero__brand-line-g"></span>
    <span class="hero__brand-line-c"></span>
    <span class="hero__brand-line-w"></span>
    <span class="hero__brand-line-c"></span>
    <span class="hero__brand-line-g"></span>
    <span class="hero__brand-line-o"></span>
    <span class="hero__brand-line-r"></span>
  </div>

  <p class="hero__subtitle">{{ t.subtitle }}</p>

  <p class="hero__authors">{{ t.authors }}</p>

  <div class="hero__sep"></div>

  <a href="{{ readPrefix }}/read/" class="hero__cta">
    {{ t.read_book }} <span class="hero__cta-arrow">&rarr;</span>
  </a>

  <div class="hero__scroll" aria-hidden="true" tabindex="-1">
    <span>{{ t.hero_scroll }}</span>
    <span class="hero__scroll-line"></span>
  </div>
</section>

{# ═══════ ABOUT ═══════ #}
<section id="about" class="about-section section">
  <div class="about-section__inner">
    <p class="section-label reveal">{{ t.section_about }}</p>
    <h2 class="reveal">{{ t.about_heading }}</h2>
    <p class="reveal">{{ t.about_p1 }}</p>
    <p class="reveal">{{ t.about_p2 }}</p>
    <p class="reveal">{{ t.about_p3 }}</p>
  </div>
</section>

<div class="gold-sep"></div>

{# ═══════ GET THE BOOK ═══════ #}
<section class="get-book-section section section--warm">
  <div class="content-wrap">
    <div class="get-book reveal">
      <div class="get-book__cover">
        <img src="/assets/images/bookcover_small.png" alt="Plurality book cover" class="get-book__img">
      </div>
      <div class="get-book__info">
        <p class="section-label">{{ t.get_book }}</p>
        <h2>{{ t.get_book_heading }}</h2>
        <p>{{ t.get_book_desc }}</p>
        <div class="get-book__links">
          <a href="{{ readPrefix }}/read/1/" class="involved-link">{{ t.read_online }} &rarr;</a>
          <a href="https://github.com/pluralitybook/plurality/releases" class="involved-link" target="_blank" rel="noopener">{{ t.download_pdf }} &rarr;</a>
          <a href="https://www.amazon.com/dp/B0DSHVHMF2" class="involved-link" target="_blank" rel="noopener">{{ t.buy_amazon }} &rarr;</a>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="gold-sep"></div>

{# ═══════ LANGUAGES ═══════ #}
<section class="lang-section section">
  <div class="content-wrap">
    <p class="section-label reveal">{{ t.section_languages }}</p>
    <h2 class="reveal">{{ t.languages_heading }}</h2>

    <div class="lang-grid">
      {% for lang in languages %}
        {% if lang.code == "en" %}
          {% set langHref = "/read/" %}
        {% elif translations[lang.code] %}
          {% set langHref = translations[lang.code].prefix + "/read/" %}
        {% else %}
          {% set langHref = "/read/" %}
        {% endif %}
        <a href="{{ langHref }}" class="lang-card reveal" lang="{{ lang.code }}">
          <p class="lang-card__native">{{ lang.nativeName }}</p>
          <p class="lang-card__name" lang="en">{{ lang.name }}</p>
        </a>
      {% endfor %}
    </div>
  </div>
</section>

<div class="gold-sep"></div>

{# ═══════ CHAPTERS ═══════ #}
<section class="chapters-section section">
  <div class="content-wrap">
    <p class="section-label reveal">{{ t.section_chapters }}</p>
    <h2 class="reveal">{{ t.chapters_heading }}</h2>

    <div class="chapter-groups">
      {% for section in chapters.sections %}
        <div class="chapter-group reveal">
          <h3 class="chapter-group__title">
            <span class="chapter-group__accent" style="background:{{ section.color }}"></span>
            {{ section.title }}
          </h3>
          <div class="chapter-list">
            {% for ch in section.chapters %}
              {% if pageLang != "en" and translations[pageLang] and translations[pageLang].files[ch.id] %}
                <a href="{{ readPrefix }}/read/{{ ch.id }}/" class="chapter-card reveal" style="border-top-color:{{ section.color }}">
                  <span class="chapter-card__number">{{ ch.number }}</span>
                  <span class="chapter-card__title">{{ translations[pageLang].files[ch.id].title }}</span>
                </a>
              {% else %}
                <a href="{{ readPrefix }}/read/{{ ch.id }}/" class="chapter-card reveal" style="border-top-color:{{ section.color }}">
                  <span class="chapter-card__number">{{ ch.number }}</span>
                  <span class="chapter-card__title">{{ ch.title }}</span>
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<div class="gold-sep"></div>

{# ═══════ ENDORSEMENTS ═══════ #}
<section class="endorsements-section section">
  <div class="content-wrap">
    <p class="section-label reveal">{{ t.section_endorsements }}</p>
    <h2 class="reveal">{{ t.endorsements_heading }}</h2>

    <div class="endorsement-grid">
      {% for item in endorsements | slice(0, 3) %}
        <div class="endorsement-card reveal">
          <span class="endorsement-card__quote-mark" aria-hidden="true">&ldquo;</span>
          <p class="endorsement-card__text">{{ item.quote }}</p>
          <p class="endorsement-card__author">{{ item.author }}</p>
          <p class="endorsement-card__role">{{ item.title }}</p>
        </div>
      {% endfor %}
    </div>

    <div class="section__view-all">
      <a href="/endorsements/" class="involved-link reveal">
        {{ t.view_all_endorsements }} &rarr;
      </a>
    </div>
  </div>
</section>

<div class="gold-sep"></div>

{# ═══════ GET INVOLVED ═══════ #}
<section class="involved-section section">
  <div class="content-wrap">
    <p class="section-label reveal">{{ t.section_get_involved }}</p>
    <h2 class="reveal">{{ t.involved_heading }}</h2>
    <p class="reveal">{{ t.involved_desc }}</p>

    <div class="involved-links">
      <a href="{{ site.github }}" class="involved-link reveal" target="_blank" rel="noopener">
        {{ t.contribute }} &rarr;
      </a>
      <a href="{{ site.discord }}" class="involved-link reveal" target="_blank" rel="noopener">
        {{ t.join_discord }} &rarr;
      </a>
      <a href="{{ readPrefix }}/read/" class="involved-link reveal">
        {{ t.start_reading }} &rarr;
      </a>
    </div>
  </div>
</section>
